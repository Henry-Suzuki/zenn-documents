---
title: "AIOpsプラットフォームの全体設計：Observe-Engage-Actを具現化する3層アーキテクチャ"
emoji: "🫧"
type: "idea"
topics:
  - "platform"
  - "engineer"
  - "sre"
  - "dbre"
  - "em"
published: true
---

# AIOpsプラットフォームの全体設計：Observe-Engage-Actを具現化する3層アーキテクチャ

現代のITシステムは、マイクロサービスの普及やクラウドネイティブ化により、そのデータ量と複雑性が指数関数的に増大しています。これに伴い、人間が監視ダッシュボードを眺めて異常を察知し、手動で対応するという従来の運用スタイルは「認知限界（Cognitive Gap）」を迎えつつあります。

![認知限界（Cognitive Gap）](/images/bf44c51dd8c5b2-01.png "認知限界（Cognitive Gap）")

この限界を突破し、運用を事後対応（Reactive）」から「予測的・自律的（Predictive/Autonomous）なステージへと引き上げるための知能エンジンがAIOpsです。本記事では、著書『AIOps実践ガイド』で提唱している、自律型運用を実現するための「3層アーキテクチャ」の詳細を解説します。

### 1. 基盤となる「Observe - Engage - Act」フレームワーク

AIOpsの核心は、単なるツールの導入ではなく、データが「行動」に変換されるまでの論理的なサイクルを構築することにあります。

* **Observe（観測）**:

    単一のメトリクス監視を超え、メトリクス（定量データ）、ログ（イベント記録）、トレース（分散パス）、イベント、そしてシステムの依存関係を示すトポロジーまで、多様なテレメトリデータを収集・統合します。これらを「Single Pane of Glass（単一の視点）」に集約することが、後続の高度な分析の前提となります。
* **Engage（関与）**:

    収集したビッグデータに対し、AIや機械学習を適用して「情報の意味」を抽出する工程です。時系列予測による異常検知、複数のアラート間の相関分析、そして根本原因分析（RCA）を自動で行います。これにより、数千件のアラートノイズを、対応が必要な数件の「インシデント」へと絞り込みます。
* **Act（行動）**:

    分析結果に基づき、具体的なアクションを実行します。ITSM（Jira/ServiceNow）への自動起票、Slackを通じたChatOps、さらにはAnsibleやTerraformを用いた「自己修復（Auto-remediation）」までを含みます。信頼レベルに応じて、人間による承認プロセスを挟むか、完全に自動化するかを選択します。

![Observe - Engage - Actフレームワーク](/images/bf44c51dd8c5b2-03.png "Observe - Engage - Actフレームワーク")

### 2. AIOpsプラットフォームの3層構造

この論理サイクルを実システムとして実装するため、プラットフォームを以下の3つの物理レイヤーで定義します。

![3つの物理レイヤー](/images/bf44c51dd8c5b2-04.png "３つの物理レイヤー")

#### ① Data Layer (Ingestion & Storage)

あらゆるデータの入口であり、AIOpsの精度を左右する最重要レイヤーです。

* **OpenTelemetry**: データの標準化と収集を担います。「Garbage In, Garbage Out（ゴミを入れてもゴミしか出てこない）」を防ぐため、標準プロトコルによるクレンジングとコンテキスト付与が不可欠です。

* **Prometheus / Log Store**: メトリクスやログをスケール可能な形で保持します。特にDBREの視点では、クエリパフォーマンスやロック競合などのデータベースメトリクスをアプリ層と紐づけて保持することが重要です。

#### ② Analytics Layer (The Brain)

収集されたデータに「知性」を与える、プラットフォームの心臓部です。

* **Stream Processing (Kafka/Flink)**: 流入するデータをリアルタイムに処理し、即時性の高い異常検知を実現します。
* **Model Training & Inference Engine**: 過去の履歴データを用いて学習した機械学習モデルに基づき、現在の状況が「異常」か「正常」かを推論します。季節性やトレンドを考慮した「動的ベースライン」の算出もここで行われます。

#### ③ Action Layer (Integration)

分析結果をビジネス価値（復旧速度の向上）に変換する出口です。

* **ITSM & ChatOps Integration**: エンジニアの既存ワークフロー（SlackやJira）に、AIが特定した原因と修復案を直接届けます。
* **Automation Framework**: 既知のトラブル（キャッシュ溢れ、ディスク圧迫など）に対して、事前に定義されたRunbook（Ansible等）を自動起動し、人間が介入する前に修復を完了させます。

### 3. 設計時に考慮すべき3つの要件

実効性のあるAIOps基盤を構築し、長期間運用し続けるためには、以下の非機能要件を設計に組み込む必要があります。

1. **Scalability（スケーラビリティ）**:

    1日あたりTB/PB級に達するテレメトリデータを遅延なく処理するため、すべてのレイヤーで水平スケーリングが可能な疎結合な設計が求められます。

2. **Real-time（リアルタイム性）**:

    障害検知から対応までの時間を最小化（MTTRの削減）するため、バッチ処理に依存しすぎず、イベント駆動型（Event-driven）のアーキテクチャを採用する必要があります。

3. **Security & Reliability（安全性）**:

    自動化による意図しない暴走を防ぐため、ロールベースのアクセス制御（RBAC）や実行ログの監査、さらには自動切り戻し（Automated Rollback）の仕組みをアクションレイヤーに実装します。

### 結論：データが「行動」に変わる仕組みをデザインする

AIOpsの真の価値は、単一のAIモデルの賢さにあるのではありません。データが自動的に収集・分析され、具体的なアクションへと流れるパイプラインが組織の文化と技術スタックの中に組み込まれているかどうかにあります。
Observe（観測）からAct（行動）までのサイクルをコードで定義し、運用を「守り」から「ビジネスを加速させる装置」へと進化させることができます。

## IT運用をビジネスの加速装置へ

私の著書『AIOps実践ガイド：自律型IT運用への進化論』では、本記事で解説したアーキテクチャのより詳細な設計指針や、AIモデルを鮮鮮に保つためのMLOpsパイプライン、さらにはデータ品質の壁を乗り越えるための実践的なアプローチを体系化しています。次世代の運用基盤を作るためのヒントを、ぜひ本書で掴んでください。
[![AIOps実践ガイド](/images/aiops.jpg)](https://amzn.asia/d/0iUNog8e)